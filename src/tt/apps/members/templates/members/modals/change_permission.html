{% extends "modals/action_2_with_cancel.html" %}
{% load static %}

{% block modal_dialog_id %}member-permission-modal{% endblock %}

{% block title_text %}Change Permission Level{% endblock %}

{% block preamble %}
<form method="post" action="{% url 'members_change_permission' trip_id=trip.pk member_id=member.pk %}" data-async="modal">
  {% csrf_token %}
{% endblock %}

{% block body %}
<p class="mb-3">
  Changing permission level for: <strong>{{ member.user.email }}</strong>
</p>

<div class="mb-3">
  <label for="{{ form.permission_level.id_for_label }}" class="form-label">New Permission Level</label>
  {{ form.permission_level }}
  {% if form.permission_level.errors %}
    <div class="invalid-feedback d-block">
      {{ form.permission_level.errors.0 }}
    </div>
  {% endif %}
  <div class="form-text">
    You can only grant permission levels lower than your own.
  </div>
</div>

{% if form.non_field_errors %}
  <div class="alert alert-danger">
    {{ form.non_field_errors.0 }}
  </div>
{% endif %}
{% endblock %}

{% block action_right %}
<button type="submit" class="btn btn-primary">CHANGE PERMISSION</button>
{% endblock %}

{% block postamble %}
</form>
{% endblock %}

{% comment %}
Reusable component for rendering a single image card in the journal image picker.

Context variables:
- image: TripImage instance
- trip: Trip instance (for permission context)
{% endcomment %}

<div class="{{ DIVID.JOURNAL_IMAGE_CARD_CLASS }}"
     draggable="true"
     data-{{ DIVID.JOURNAL_IMAGE_UUID_ATTR }}="{{ image.uuid }}"
     data-{{ DIVID.JOURNAL_IMAGE_URL_ATTR }}="{{ image.web_image.url }}"
     data-thumbnail-url="{{ image.thumbnail_image.url }}"
     data-{{ DIVID.JOURNAL_INSPECT_URL_ATTR }}="{% url 'images_image_inspect' image_uuid=image.uuid %}?trip_uuid={{ trip.uuid }}"
     data-{{ DIVID.JOURNAL_CAPTION_ATTR }}="{{ image.caption|default:'Untitled' }}"
     title="{{ image.caption|default:'Untitled' }} - {% if image.datetime_utc %}{{ image.datetime_utc|date:'g:i A' }}{% else %}Unknown time{% endif %}">
  <div class="journal-image-thumbnail">
    <img src="{{ image.thumbnail_image.url }}" alt="{{ image.caption }}" class="w-100 h-100" style="object-fit: cover;">
  </div>
  <div class="journal-image-caption">
    <small class="font-weight-bold d-block text-truncate">
      {% if image.caption %}
        {{ image.caption }}
      {% else %}
        <span class="text-muted">Untitled</span>
      {% endif %}
    </small>
    {% if image.datetime_utc %}
      <small class="text-muted">{{ image.datetime_utc|date:"g:i A" }}</small>
    {% else %}
      <small class="text-muted">Unknown time</small>
    {% endif %}
  </div>
</div>

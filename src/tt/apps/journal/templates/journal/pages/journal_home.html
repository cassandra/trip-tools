{% extends "journal/pages/journal_base.html" %}

{% block trip_content %}
<div class="m-3">

  {% if journal %}
    {% if journal_entries %}
    <div class="list-group">
      {% for entry in journal_entries %}
      <a href="{% url 'journal_entry' trip_id=trip_page.trip.pk entry_pk=entry.pk %}"
         class="list-group-item list-group-item-action">
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1">
            {% if entry.title %}
              {{ entry.title }}
            {% else %}
              {{ entry.date|date:'l, F j, Y' }}
            {% endif %}
          </h5>
          <small class="text-muted">Modified {{ entry.modified_datetime|timesince }} ago</small>
        </div>
        {% if entry.text %}
        <p class="mb-1 text-truncate">{{ entry.text|truncatewords:20 }}</p>
        {% else %}
        <p class="mb-1 text-muted"><em>Empty entry</em></p>
        {% endif %}
      </a>
      {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info">
      <h4>No journal entries yet</h4>
      <p>Your journal has been created! Add entries to share your trip experiences.</p>
      <a href="{% url 'journal_entry_new' trip_id=trip_page.trip.pk %}" class="btn btn-primary">Create Entry</a>
    </div>
    {% endif %}
  {% else %}
    <div class="alert alert-info">
      <h4>No Journal Yet</h4>
      <p>Create a journal to share your trip experiences with others. Your journal will be initialized with your existing notebook entries.</p>
      <a href="{% url 'journal_create' trip_id=trip_page.trip.pk %}" class="btn btn-primary" data-async="modal">Create Journal</a>
    </div>
  {% endif %}

</div>
{% endblock %}

{% extends "modals/action_2_with_cancel.html" %}
{% load humanize %}
{% load icons %}

{% block title_text %}Disconnect Browser Extension{% endblock %}

{% block preamble %}
{% if api_token %}
<form method="post" action="{% url 'user_api_token_delete' lookup_key=api_token.lookup_key %}" data-async="modal">
  {% csrf_token %}
{% endif %}
{% endblock %}

{% block body %}
{% if error_message %}
<div class="alert alert-danger">
  {{ error_message }}
</div>
{% else %}
<div class="alert alert-warning">
  <strong>This action cannot be undone.</strong>
</div>
<p>
  Are you sure you want to disconnect the following browser extension:
</p>
<ul>
  <strong>{{ api_token.name }}</strong>
  <span class="text-muted" >
    <br>Created: {{ api_token.created_at|date:"M d, Y" }}
    <br>Last used:
    {% if api_token.last_used_at %}
    {{ api_token.last_used_at|naturaltime }}
    {% else %}
    Never
    {% endif %}
  </span>
</ul>
<p>
  That browser extension will no longer be able to access your account after disconnect.
</p>
{% endif %}
{% endblock %}

{% block action_right %}
{% if api_token %}
<button type="submit" class="btn btn-danger">{% icon "trash" size="md" %} Disconnect</button>
{% endif %}
{% endblock %}

{% block postamble %}
{% if api_token %}
</form>
{% endif %}
{% endblock %}

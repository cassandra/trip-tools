{% load icons %}
{% load humanize %}
<div class="table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>Prefix</th>
        <th>Installed</th>
        <th>Last Used</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for api_token in api_token_list %}
      <tr>
        <td>
          {% if icon_name %}{% icon icon_name size="sm" css_class="text-muted mr-2" %}{% endif %}
          <strong>{{ api_token.name }}</strong>
        </td>
        <td><code>tt_{{ api_token.lookup_key }}</code></td>
        <td>{{ api_token.created_at|date:"M d, Y" }}</td>
        <td>
          {% if api_token.last_used_at %}
            {{ api_token.last_used_at|naturaltime }}
            <span class="badge badge-success ml-1">Active</span>
          {% else %}
            Never
            <span class="badge badge-secondary ml-1">Unused</span>
          {% endif %}
        </td>
        <td>
          <a href="{% url 'user_api_token_delete' api_token_id=api_token.id %}"
             class="btn btn-outline-danger btn-sm"
             data-async="modal">
            {% icon "trash" size="sm" %} {% if delete_action %}{{ delete_action|capfirst }}{% else %}Delete{% endif %}
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

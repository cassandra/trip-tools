{% extends "modals/action_2_with_cancel.html" %}
{% load static %}
{% load icons %}

{% block modal_dialog_id %}remove-member-modal{% endblock %}

{% block header_class %}{% if remove_data.is_self_removal %}bg-danger{% else %}bg-danger{% endif %}{% endblock %}

{% block title_text %}{% if remove_data.is_self_removal %}Remove Yourself from Trip{% else %}Remove Member{% endif %}{% endblock %}

{% block preamble %}
<form method="post" action="{% url 'members_remove' trip_id=trip_id member_id=remove_data.member_id %}" data-async="modal">
  {% csrf_token %}
{% endblock %}

{% block body %}
  {% if form.non_field_errors %}
  <div class="alert alert-danger" role="alert">
    {{ form.non_field_errors }}
  </div>
  {% endif %}

  <div class="alert alert-warning">
    <strong>Warning:</strong> This action cannot be undone.
  </div>

  {% if remove_data.is_self_removal %}
  <p><strong>Are you absolutely sure?</strong></p>
  <div class="alert alert-danger">
    <strong>You are removing yourself from this trip.</strong>
    <p class="mb-0">You will lose access to this trip and cannot undo this action.</p>
  </div>
  {% else %}
  <p>Are you sure you want to remove this member from the trip?</p>
  {% endif %}

  <div class="bg-light p-3 rounded border">
    <dl class="mb-0">
      <dt>Member Name</dt>
      <dd>{{ remove_data.member_name }}</dd>
      <dt>Email</dt>
      <dd>{{ remove_data.member_email }}</dd>
      <dt>Current Permission</dt>
      <dd>
        <span class="badge badge-{{ remove_data.permission_badge_class }} badge-pill">
          {{ remove_data.permission_label }}
        </span>
      </dd>
    </dl>
  </div>
{% endblock %}

{% block action_right %}
<button type="submit" class="btn btn-danger">
  {% icon "delete" size="sm" css_class="tt-icon-left" %}
  {% if remove_data.is_self_removal %}YES, REMOVE ME{% else %}REMOVE MEMBER{% endif %}
</button>
{% endblock %}

{% block postamble %}
</form>
{% endblock %}
